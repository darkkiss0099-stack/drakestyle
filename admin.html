<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN PANEL | DRAKESTYLE</title>
<style>
body{background:#000;color:#fff;font-family:Arial, Helvetica, sans-serif;text-align:center;padding:30px;}
input[type=text], input[type=url]{padding:5px;margin:5px;width:250px;border-radius:5px;border:none;}
input[type=color]{padding:5px;margin:5px;border:none;}
button{padding:5px 10px;margin:3px;border:none;border-radius:5px;background:#00aaff;color:#fff;cursor:pointer;}
button:hover{background:#0088cc;}
.member-box{border:2px solid #fff;padding:15px;margin:10px;border-radius:10px;text-align:left;}
label{display:block;margin-top:5px;}
</style>
</head>
<body>

<h1>ADMIN PANEL</h1>
<p>แก้ไขสมาชิก, Font, Background, โลโก้</p>

<h3>ตั้งค่าเว็บไซต์</h3>
<label>Font ตัวอักษร:</label>
<input type="text" id="fontInput" placeholder="เช่น Arial" oninput="changeFont()">
<label>Background Color หน้าเว็บ:</label>
<input type="color" id="bgColor" value="#000000" onchange="changeBG()">
<label>ใส่โลโก้ / ตรา (URL):</label>
<input type="url" id="logoURL" placeholder="https://...">
<label>แสดงตรา/โลโก้?</label>
<select id="showLogo">
  <option value="yes">ใช่</option>
  <option value="no">ไม่</option>
</select>
<button onclick="saveSettings()">บันทึกตั้งค่า</button>

<h3>สมาชิก</h3>
<div id="members"></div>
<button onclick="addMember()">เพิ่มสมาชิกใหม่</button><br><br>
<a href="index.html">กลับหน้าเว็บ</a>

<script>
// โหลดข้อมูลเก่า
let stored = JSON.parse(localStorage.getItem('membersData'));
let membersData = stored ? stored.members : {
  comingsoon:[{name:'COMING SOON 1', fb:'https://facebook.com/comingsoon1', img:''}],
  drakestyle:[{name:'DRAKESTYLE', fb:'https://facebook.com/drakestyle', img:''}],
  tested:[{name:"TESTE'D 1", fb:'https://facebook.com/tested1', img:''}]
};

let fontFamily = stored && stored.font ? stored.font : 'Arial, Helvetica, sans-serif';
let bgColor = stored && stored.bg ? stored.bg : '#000';
let logoURL = stored && stored.logo ? stored.logo : '';
let showLogo = stored && stored.showLogo ? stored.showLogo : 'no';

// ใส่ค่าใน input
document.getElementById('fontInput').value = fontFamily;
document.getElementById('bgColor').value = bgColor;
document.getElementById('logoURL').value = logoURL;
document.getElementById('showLogo').value = showLogo;

document.body.style.fontFamily = fontFamily;
document.body.style.backgroundColor = bgColor;

function renderMembers(){
  const container = document.getElementById('members');
  container.innerHTML='';
  for(let card in membersData){
    const h3 = document.createElement('h3'); h3.textContent = card.toUpperCase();
    container.appendChild(h3);
    membersData[card].forEach((m,i)=>{
      const div = document.createElement('div'); div.className='member-box';
      div.innerHTML=`
        <label>ชื่อ:</label><input type="text" value="${m.name}" id="${card}-name-${i}">
        <label>Facebook Link:</label><input type="text" value="${m.fb}" id="${card}-fb-${i}">
        <label>รูปโปรไฟล์ URL:</label><input type="url" value="${m.img}" id="${card}-img-${i}">
        <button onclick="saveMember('${card}',${i})">บันทึก</button>
        <button onclick="deleteMember('${card}',${i})">ลบ</button>
      `;
      container.appendChild(div);
    });
  }
}

function saveMember(card,index){
  const name = document.getElementById(`${card}-name-${index}`).value;
  const fb = document.getElementById(`${card}-fb-${index}`).value;
  const img = document.getElementById(`${card}-img-${index}`).value;
  membersData[card][index]={name, fb, img};
  saveSettings();
  alert('บันทึกเรียบร้อย');
}

function deleteMember(card,index){
  if(confirm('ต้องการลบสมาชิกนี้?')){
    membersData[card].splice(index,1);
    saveSettings();
    renderMembers();
  }
}

function addMember(){
  const card=prompt('ใส่กลุ่มสมาชิก (comingsoon / drakestyle / tested)');
  if(card && membersData[card]){
    membersData[card].push({name:'ชื่อใหม่', fb:'#', img:''});
    saveSettings();
    renderMembers();
  }else{alert('กลุ่มไม่ถูกต้อง');}
}

// ฟังก์ชันบันทึกตั้งค่า font, bg, logo
function saveSettings(){
  fontFamily = document.getElementById('fontInput').value;
  bgColor = document.getElementById('bgColor').value;
  logoURL = document.getElementById('logoURL').value;
  showLogo = document.getElementById('showLogo').value;
  
  localStorage.setItem('membersData', JSON.stringify({
    members: membersData,
    font: fontFamily,
    bg: bgColor,
    logo: logoURL,
    showLogo: showLogo
  }));
  document.body.style.fontFamily = fontFamily;
  document.body.style.backgroundColor = bgColor;
}

renderMembers();
</script>

</body>
</html>
